#include "sin.h"

#ifdef SAMPLING_2_5KHZ
const uint32_t sintable[SAMPLES] = {
	0, 386, 765, 1133, 1482, 1809, 2106, 2371, 2598, 2784, 2926, 3022, 3071, 3071, 3022, 2926, 2784, 2598, 2371, 2106, 1809, 1482, 1133, 765, 386, 0
};
#endif

#ifdef SAMPLING_5KHZ
const uint32_t sintable[SAMPLES] = {
	0, 98, 197, 294, 390, 485, 577, 668, 756, 841, 922, 1000, 1074, 1143, 1209, 1269, 1324, 1375, 1419, 1458, 1492, 1519, 1541, 1556, 1566, 1569,
	1566, 1556, 1541, 1519, 1492, 1458, 1419, 1375, 1324, 1269, 1209, 1143, 1074, 1000, 922, 841, 756, 668, 577, 485, 390, 294, 197, 98, 0,
};
#endif

#ifdef SAMPLING_7_5KHZ
const uint32_t sintable[SAMPLES] = {
	0, 176,	352, 528, 702, 875, 1047, 1217, 1385, 1550, 1713, 1872, 2028, 2181, 2330, 2475, 2615, 2751, 2882, 3008, 3129, 3244, 3354, 3457, 3555, 3646,
	3731, 3810, 3882, 3946, 4004, 4055, 4099, 4136, 4165, 4187, 4202, 4210, 4210, 4202, 4187, 4165, 4136, 4099, 4055, 4004, 3946, 3882, 3810, 3731,
	3646, 3555, 3457, 3354, 3244, 3129, 3008, 2882,	2751, 2615, 2475, 2330, 2181, 2028, 1872, 1713, 1550, 1385, 1217, 1047, 875, 702, 528, 352, 176, 0
};
#endif

#ifdef SAMPLING_10KHZ
const uint32_t sintable[SAMPLES] = {
	0, 100, 199, 298, 397, 496, 594, 691, 788, 884, 979, 1073, 1166, 1258, 1349, 1438, 1526, 1613, 1698, 1781, 1862, 1942, 2020, 2095, 2169, 2240,
	2310, 2377, 2441, 2503, 2563, 2620, 2675, 2727, 2776, 2823, 2867, 2908, 2946, 2981, 3013, 3043, 3069, 3092, 3112, 3129, 3143, 3154, 3162, 3167, 3168,
	3167, 3162, 3154, 3143, 3129, 3112, 3092, 3069, 3043, 3013, 2981, 2946, 2908, 2867, 2823, 2776, 2727, 2675, 2620, 2563, 2503, 2441, 2377, 2310, 2240,
	2169, 2095, 2020, 1942, 1862, 1781, 1698, 1613, 1526, 1438, 1349, 1258, 1166, 1073, 979, 884, 788, 691, 594, 496, 397, 298, 199, 100, 0,
};
#endif

#ifdef SAMPLING_10KHZ_C
const uint32_t sintable[SAMPLES] = {
	0, 139, 278, 416, 553, 689, 823, 954, 1084, 1210, 1333, 1453, 1570, 1682, 1791, 1895, 1995, 2091, 2182, 2268, 2350, 2427, 2499, 2567, 2630, 2688, 2743,
	2792, 2838, 2880, 2917, 2952, 2982, 3010, 3034, 3056, 3075, 3091, 3106, 3118, 3128, 3137, 3145, 3151, 3156, 3160, 3163, 3165, 3167, 3168, 3168,
	3168, 3167, 3165, 3163, 3160, 3156, 3151, 3145, 3137, 3128, 3118, 3106, 3091, 3075, 3056, 3034, 3010, 2982, 2952, 2917, 2880, 2838, 2792, 2743,
	2688, 2630, 2567, 2499, 2427, 2350, 2268, 2182, 2091, 1995, 1895, 1791, 1682, 1570, 1453, 1333, 1210, 1084, 954, 823, 689, 553, 416, 278, 139, 0,
};
#endif

void calculate_sintable(uint32_t* lut, uint8_t k) {
	for (int i=0; i<SAMPLES; i++) {
		uint32_t new = (sintable[i] * k) >> 8;
		lut[i] = new < TIMER_PERIOD ? new : TIMER_PERIOD;
	}
}
